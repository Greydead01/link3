<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The... end?</title>

<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    font-family: Arial, sans-serif;
    overflow: hidden;
    background: black;
}

#screen {
    width: 100%;
    height: 100%;
    background: white;
    position: relative;
}

#title {
    position: absolute;
    top: 70px;
    width: 100%;
    text-align: center;
    color: red;
    font-size: 48px;
    font-weight: bold;
}

.spinner {
    position: absolute;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
}

.spinner div {
    position: absolute;
    width: 8px;
    height: 8px;
    background: black;
    border-radius: 50%;
    transform-origin: 40px 40px;
    animation: fade 1.2s linear infinite;
}

@keyframes fade {
    from { opacity: 1; }
    to { opacity: 0; }
}

#status {
    position: absolute;
    bottom: 120px;
    width: 100%;
    text-align: center;
    font-size: 18px;
}

.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #eee;
    border: 2px solid black;
    padding: 20px;
    text-align: center;
    z-index: 300;
}

button {
    margin: 10px;
    padding: 8px 20px;
    cursor: pointer;
}

#message {
    position: fixed;
    top: 30%;
    width: 100%;
    text-align: center;
    font-size: 24px;
    color: black;
    display: none;
}

#transition {
    position: fixed;
    inset: 0;
    background: black;
    display: none;
    z-index: 500;
}

#subtitles {
    position: fixed;
    bottom: 20px;
    width: 100%;
    text-align: center;
    font-family: "Courier New", monospace;
    font-size: 20px;
    color: #00ff00;
    z-index: 600;
}

video {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    max-width: 70%;
    max-height: 70%;
    object-fit: contain;
    display: none;
    z-index: 400;
}
</style>
</head>

<body>

<div id="screen">
    <div id="title">ANTIVIRUS</div>
    <div class="spinner" id="spinner"></div>
    <div id="status">preparing reboot<span id="dots"></span></div>
</div>

<div class="popup" id="popup1" style="display:none;">
    <div>do you wish to proceed?</div>
    <button id="yesBtn">YES</button>
    <button id="noBtn">NO</button>
</div>

<div id="message">you got a pretty serious virus on your laptop. just press yes kiddo</div>

<div id="transition"></div>

<video id="video1" src="videopart1.mp4"></video>
<video id="video2" src="videopart2.mp4"></video>

<audio id="audio1" src="audiopart1.mp3"></audio>
<audio id="audio2" src="audiopart2.mp3"></audio>

<div id="subtitles"></div>

<script>
/* ===== HELPERS ===== */
function wait(ms){return new Promise(res=>setTimeout(res, ms));}

/* TYPEWRITER THAT HANDLES RED SPANS PROPERLY */
async function typeText(element, htmlString, speed=50) {
    element.innerHTML = "";
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = htmlString; // parse the HTML

    for (let node of tempDiv.childNodes) {
        if (node.nodeType === Node.TEXT_NODE) {
            for (const ch of node.textContent) {
                element.innerHTML += ch;
                await wait(speed);
            }
        } else if (node.nodeType === Node.ELEMENT_NODE && node.tagName === "SPAN") {
            const spanEl = document.createElement("span");
            if (node.style.color) spanEl.style.color = node.style.color;
            element.appendChild(spanEl);
            for (const ch of node.textContent) {
                spanEl.innerHTML += ch;
                await wait(speed);
            }
        }
    }
}

/* ===== SPINNER ===== */
const spinner = document.getElementById("spinner");
for (let i = 0; i < 12; i++) {
    const dot = document.createElement("div");
    dot.style.transform = `rotate(${i*30}deg) translate(0, -35px)`;
    dot.style.animationDelay = `${i*0.1}s`;
    spinner.appendChild(dot);
}

/* ===== LOADING DOTS ===== */
let dotCount = 0;
const dotInterval = setInterval(() => {
    dotCount = (dotCount + 1) % 4;
    document.getElementById("dots").textContent = ".".repeat(dotCount);
}, 500);

/* ===== SHOW POPUP1 ===== */
setTimeout(() => {
    clearInterval(dotInterval);
    document.getElementById("dots").textContent = "";
    document.getElementById("status").textContent = "ready to reboot";
    spinner.style.display = "none";
    setTimeout(()=>document.getElementById("popup1").style.display="block", 1000);
}, 5000);

/* ===== NO BUTTON ===== */
const noBtn = document.getElementById("noBtn");
noBtn.onclick = () => {
    document.getElementById("message").style.display = "block";
    noBtn.disabled = true;
};

/* ===== YES BUTTON LOGIC ===== */
const yesBtn = document.getElementById("yesBtn");
const video1 = document.getElementById("video1");
const audio1 = document.getElementById("audio1");
const video2 = document.getElementById("video2");
const audio2 = document.getElementById("audio2");
const transition = document.getElementById("transition");
const subtitlesEl = document.getElementById("subtitles");

/* TIMED SUBTITLES WITH TYPEWRITER EFFECT */
async function playTimedSubs(subsList){
    const startTime = Date.now();
    for(const [text, sec] of subsList){
        const waitTime = sec*1000 - (Date.now() - startTime);
        if(waitTime>0) await wait(waitTime);
        await typeText(subtitlesEl, text, 40);
    }
    subtitlesEl.innerHTML = "";
}

/* YES BUTTON ACTION */
yesBtn.onclick = async () => {
    document.getElementById("screen").style.display="none";
    document.getElementById("popup1").style.display="none";
    document.getElementById("message").style.display="none";

    video1.style.display="block";
    video1.play();
    audio1.play();

    playTimedSubs([
        ["Well now.",0.6],
        ["You didn’t really think it would be that easy, did you?",2.6],
        ["Anyhow.",9.1],
        ["For YOUR safety:",10.55],
        ["<span style='color:red'>PROTECT WHAT YOU WEAR.</span>",13.1],
        ["Unexpected events are not just possible.",15.45],
        ["They are scheduled.",19.5],
        ["Stay alert.",23.35],
        ["Stay vigil.",24.95],
        ["<span style='color:red'>A VIDEO MAY APPEAR ON INSTAGRAM ANY MOMENT NOW.</span>",26.7],
        ["I would hate for you to miss the show.",30.95],
        ["Well now...",34.15],
        ["I guess we are...",35.65],
        ["or should I say...",37.85],
        ["I...",39.8],
        ["am done here.",41.8],
        ["Untill next time.",44],
        ["Or should I say...",46.1],
        ["UNTILL NEVER AGAIN!",48.45]
    ]);

    setTimeout(()=>{ transition.style.display="block"; }, 45000);

    video1.onended = ()=>{
        transition.style.display="none";
        video1.style.display="none";
        video2.style.display="block";
        video2.play();
        audio2.play();

        playTimedSubs([
            ["Oh...",1.8],
            ["Thats embarrasing.",3],
            ["Let’s just...",4.95],
            ["uh...",6.95],
            ["do that over.",9.15],
            ["Okay.",11.3],
            ["Pretend that never happened.",12.75],
            ["Ahem.",15],
            ["Well now...",16.95],
            ["I guess we are...",18.45],
            ["or should I say...",22.3],
            ["I...",24.45],
            ["am done here.",26.1],
            ["Untill next time.",28.32],
            ["Or should i say...",30.5],
            ["untill TOMORROW!",32.55]
        ]);
    };

    video2.onended = async ()=>{
        video2.style.display="none";
        transition.style.display="block";
        subtitlesEl.innerHTML="";

        const finalEl = document.createElement("div");
        finalEl.style.position="fixed";
        finalEl.style.top="35%";
        finalEl.style.width="100%";
        finalEl.style.textAlign="center";
        finalEl.style.fontSize="64px";
        finalEl.style.color="#00ff00";
        finalEl.style.fontFamily="Courier New, monospace";
        finalEl.style.zIndex="601";
        document.body.appendChild(finalEl);

        const subEl = document.createElement("div");
        subEl.style.position="fixed";
        subEl.style.top="55%";
        subEl.style.width="100%";
        subEl.style.textAlign="center";
        subEl.style.fontSize="28px";
        subEl.style.color="#00ff00";
        subEl.style.fontFamily="Courier New, monospace";
        subEl.style.zIndex="601";
        subEl.innerText="have a happy last 100 days";
        subEl.style.display = "none";
        document.body.appendChild(subEl);

        const finalText = "SENIOR ZENITH 2026";
        await typeText(finalEl, finalText, 200);
        await wait(1000);
        subEl.style.display = "block";
    };
};
</script>

</body>
</html>
