<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Antivirus</title>
<style>
html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    font-family: Arial, sans-serif;
    overflow: hidden;
    background: black;
}

/* ================= SCREEN ================= */
#screen {
    width: 100%;
    height: 100%;
    background: white;
    position: relative;
}

/* Title */
#title {
    position: absolute;
    top: 70px;
    width: 100%;
    text-align: center;
    color: red;
    font-size: 48px;
    font-weight: bold;
}

/* Spinner centered */
.spinner {
    position: absolute;
    top: 45%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
}

/* Spinner dots */
.spinner div {
    position: absolute;
    width: 8px;
    height: 8px;
    background: black;
    border-radius: 50%;
    transform-origin: 40px 40px;
    animation: fade 1.2s linear infinite;
}

@keyframes fade {
    from { opacity: 1; }
    to { opacity: 0; }
}

/* Status text LOWER */
#status {
    position: absolute;
    bottom: 120px;
    width: 100%;
    text-align: center;
    font-size: 18px;
}

/* Popups */
.popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #eee;
    border: 2px solid black;
    padding: 20px;
    text-align: center;
    z-index: 300;
}

button {
    margin: 10px;
    padding: 8px 20px;
    cursor: pointer;
}

/* Blackout / NO overlay */
#blackout {
    position: fixed;
    inset: 0;
    background: black;
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    z-index: 200;
}

#wrongText {
    color: red;
    font-size: 64px;
    font-weight: bold;
}

#subText {
    color: lime;
    margin-top: 15px;
    font-size: 20px;
}

/* Transition overlay for between videos */
#transition {
    position: fixed;
    inset: 0;
    background: black;
    display: none;
    z-index: 500; /* less than subtitles */
}

/* Subtitles */
#subtitles {
    position: fixed;
    bottom: 20px;
    width: 100%;
    text-align: center;
    font-family: "Courier New", monospace;
    font-size: 20px;
    color: #00ff00;
    z-index: 600;
}

/* Video styling */
video {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    max-width: 70%;
    max-height: 70%;
    object-fit: contain;
    display: none;
    z-index: 400;
}

/* Fake cursor */
#fakeCursor {
    position: fixed;
    width: 20px;
    height: 20px;
    background: white;
    clip-path: polygon(0 0, 0 100%, 25% 75%, 45% 100%, 55% 95%, 35% 70%, 60% 70%);
    display: none;
    z-index: 9999;
}
</style>
</head>

<body>

<div id="screen">
    <div id="title">ANTIVIRUS</div>
    <div class="spinner" id="spinner"></div>
    <div id="status">preparing reboot<span id="dots"></span></div>
</div>

<div class="popup" id="popup1" style="display:none;">
    <div>do you wish to proceed?</div>
    <button id="yesBtn">YES</button>
    <button id="noBtn">NO</button>
</div>

<div id="blackout">
    <div id="wrongText"></div>
    <div id="subText"></div>
</div>

<div class="popup" id="popup2" style="display:none;">
    <div>do you wish to terminate this device?</div>
    <button id="yesAuto">YES</button>
    <button>NO</button>
</div>

<div id="transition"></div>

<video id="video1" src="videopart1.mp4"></video>
<video id="video2" src="videopart2.mp4"></video>

<audio id="audio1" src="audiopart1.mp3"></audio>
<audio id="audio2" src="audiopart2.mp3"></audio>

<div id="subtitles"></div>
<div id="fakeCursor"></div>

<script>
/* ===== SPINNER ===== */
const spinner = document.getElementById("spinner");
for (let i = 0; i < 12; i++) {
    const dot = document.createElement("div");
    dot.style.transform = `rotate(${i*30}deg) translate(0, -35px)`;
    dot.style.animationDelay = `${i*0.1}s`;
    spinner.appendChild(dot);
}

/* ===== LOADING DOTS ===== */
let dotCount = 0;
const dotInterval = setInterval(() => {
    dotCount = (dotCount + 1) % 4;
    document.getElementById("dots").textContent = ".".repeat(dotCount);
}, 500);

/* ===== SHOW POPUP1 ===== */
setTimeout(() => {
    clearInterval(dotInterval);
    document.getElementById("dots").textContent = "";
    document.getElementById("status").textContent = "ready to reboot";
    spinner.style.display = "none";
    setTimeout(()=>document.getElementById("popup1").style.display="block", 1000);
}, 5000);

/* ===== NO BUTTON ===== */
const noBtn = document.getElementById("noBtn");
noBtn.onclick = () => {
    document.getElementById("popup1").style.display = "none";
    document.getElementById("subText").innerText = "you got a pretty serious virus on your laptop. just press yes kiddo";
    noBtn.disabled = true;
};

/* ===== YES BUTTON ===== */
const yesBtn = document.getElementById("yesBtn");
const video1 = document.getElementById("video1");
const audio1 = document.getElementById("audio1");
const video2 = document.getElementById("video2");
const audio2 = document.getElementById("audio2");
const transition = document.getElementById("transition");
const subtitlesEl = document.getElementById("subtitles");

function wait(ms){return new Promise(res=>setTimeout(res, ms));}

/* Typed subtitles helper */
async function typeLine(line){
    subtitlesEl.innerHTML = "";
    for(let i=0;i<line.length;i++){
        subtitlesEl.innerHTML += line[i];
        await wait(25); // typing speed, adjust if wanted
    }
}

/* TIMED SUBTITLES PLAYBACK */
async function playTimedSubs(subsList, startOffset=0){
    const startTime = Date.now() - startOffset*1000;
    for(const [text, sec] of subsList){
        const waitTime = sec*1000 - (Date.now() - startTime);
        if(waitTime>0) await wait(waitTime);
        await typeLine(text);
    }
    subtitlesEl.innerHTML = "";
}

yesBtn.onclick = async () => {
    document.getElementById("screen").style.display="none";
    document.getElementById("popup1").style.display="none";
    transition.style.display="none";

    // play video1 + audio1
    video1.style.display="block";
    video1.play();
    audio1.play();
    playTimedSubs([
        ["Well now.",0.6],
        ["You didn’t really think it would be that easy, did you.?",2.6],
        ["Anyhow.",9.1],
        ["For YOUR safety:",10.55],
        ["<strong>PROTECT WHAT YOU WEAR.</strong>",13.1],
        ["Unexpected events are not just possible.",15.45],
        ["They are scheduled.",19.5],
        ["Stay alert.",23.35],
        ["Stay vigil.",24.95],
        ["<strong>A VIDEO MAY APPEAR ON INSTAGRAM ANY MOMENT NOW.</strong>",26.7],
        ["I would hate for you to miss the show.",30.95],
        ["Well now...",34.15],
        ["I guess we are...",35.65],
        ["or should I say...",37.85],
        ["I...",39.8],
        ["am done here.",41.8],
        ["Untill next time.",44],
        ["Or should I say...",46.1],
        ["UNTILL NEVER AGAIN!",48.45]
    ]);

    // After 45s show black overlay, keep subtitles on top
    setTimeout(()=>{
        transition.style.display="block";
    }, 45000);

    // When video1 ends, start video2/audio2, remove black overlay
    video1.onended = ()=>{
        transition.style.display="none";
        video1.style.display="none";
        video2.style.display="block";
        video2.play();
        audio2.play();
        playTimedSubs([
            ["Oh...",1.8],
            ["Thats embarrasing.",3],
            ["Let’s just...",4.95],
            ["uh...",6.95],
            ["do that over.",9.15],
            ["Okay.",11.3],
            ["Pretend that never happened.",12.75],
            ["Ahem.",15],
            ["Well now...",16.95],
            ["I guess we are...",18.45],
            ["or should I say...",22.3],
            ["I...",24.45],
            ["am done here.",26.1],
            ["Untill next time.",28.32],
            ["Or should i say...",30.5],
            ["untill TOMORROW!",32.55]
        ]);
    };
};
</script>

</body>
</html>
